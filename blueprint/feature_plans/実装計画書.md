# 実装計画書（Implementation Plan）- ライフプラン・シミュレーター

本計画は現行コードベースを踏まえ、MVP完成→品質向上→拡張の順で実装を段階化します。各項目は対象ファイル、実装方針、完了条件を明確化します。

## 1. 基本方針
- 最小価値（MVP）を最短で一気通貫化：フォーム入力 → API実行 → 結果可視化。
- 既存資産の最大活用：`api/simulate/index.ts`、`components/dashboard/*` を結果画面に統合。
- 型とバリデーションを前倒しで整備し、以降の改修コストを削減。

## 2. フェーズ別ロードマップ

**ステータス凡例:** `[済]` 完了, `[進行中]` 進行中/一部完了, `[未着手]` 未着手

### Phase 0: 一気通貫の成立（MVP）
- `[済]` 1) 結果ページの実装とルーティング整備
- `[済]` 2) フォーム → API 連携の実装
- `[済]` 3) ダッシュボード統合の再利用
- `[済]` 4) 最低限のバリデーションとエラー表示

### Phase 1: 型/設計の堅牢化とUX向上
- `[済]` 5) 型の共通化とスキーマ定義
- `[未着手]` 6) zod による入力/受信バリデーション
- `[済]` 7) フォームの分割と可読性改善
- `[済]` 8) 結果ページの導線と再試行性

### Phase 2: 計算精度/機能拡張
- `[未着手]` 9) 税/社会保険料の精度向上
- `[済]` 10) 投資シナリオ/ストレステストの明確化
- `[進行中]` 11) 保存/復元（段階導入）
    - Step1: `localStorage` 自動保存&復元 `[済]`
    - Step2: サインインとDB永続化 `[未着手]`

### Phase 3: 品質保証と運用
- `[進行中]` 12) テスト整備
    - 単体テスト（Vitest） `[未着手]`
    - UIテスト（React Testing Library） `[未着手]`
    - E2Eテスト（Playwright） `[進行中]` (基本設定は完了、カバレッジ拡大が必要)
- `[進行中]` 13) CI/CD とモニタリング
    - CI（GitHub Actions） `[進行中]` (テスト実行は導入済み)
    - CD（Vercelデプロイ自動化） `[未着手]`
    - エラー監視（Sentry等） `[未着手]`

---
以降のタスク詳細は、実績や課題に応じて `unimplemented_features.md` と同期しながら見直します。
