## ğŸ¯ ä¿®æ­£ä¾é ¼å†…å®¹ï¼šFormPage ã§å¤–éƒ¨é›¢è„±æ™‚ã«ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆå…¥åŠ›ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿï¼‰ã‚’è¡¨ç¤ºã™ã‚‹

---

### âœ… èƒŒæ™¯ã¨ç›®çš„

ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ é€”ä¸­ã§ãƒ–ãƒ©ã‚¦ã‚¶ã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’2å›æŠ¼ã™ã¨ãƒšãƒ¼ã‚¸ã‚’é›¢è„±ã—ã¦ã—ã¾ã„ã€å…¥åŠ›å†…å®¹ãŒå¤±ã‚ã‚Œã‚‹ã€‚  
ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³é·ç§»ã«ã‚ˆã‚‹å±¥æ­´åˆ¶å¾¡ã§ã¯å®Œå…¨ãªãƒ–ãƒ­ãƒƒã‚¯ãŒå›°é›£ãªãŸã‚ã€é›¢è„±æ™‚ã«ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šã‚’ä¸ãˆãŸã„ã€‚

---

### âœ… å®Ÿè£…æ–¹é‡

- window.addEventListener("beforeunload", ...) ã«ã‚ˆã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶é›¢è„±æ™‚ã®ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹  
- ã‚¤ãƒ™ãƒ³ãƒˆã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å†…ã§ e.preventDefault() ã¨ returnValue ã®è¨­å®šã‚’è¡Œã†ã“ã¨ã§ã€ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸éè¡¨ç¤ºï¼‰  
- React ã® useEffect ã«ã‚ˆã‚Šã€ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ç™»éŒ²ã€ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«è§£é™¤

---

### ğŸ”§ è¿½åŠ ã‚³ãƒ¼ãƒ‰ï¼ˆFormPage ã® useEffect ã«è¿½åŠ ï¼‰

useEffect(() => {
  const handleBeforeUnload = (e: BeforeUnloadEvent) => {
    e.preventDefault();
    e.returnValue = ""; // Chrome, Firefox ã§æœ‰åŠ¹
  };

  window.addEventListener("beforeunload", handleBeforeUnload);

  return () => {
    window.removeEventListener("beforeunload", handleBeforeUnload);
  };
}, []);

---

### âœ… è£œè¶³äº‹é …

- è¡¨ç¤ºã•ã‚Œã‚‹æ–‡è¨€ï¼ˆã€Œå…¥åŠ›ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿã€ï¼‰ã¯ **ãƒ–ãƒ©ã‚¦ã‚¶å´ãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è¡¨ç¤ºã•ã‚Œãªã„**ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚‹ï¼‰  
- Safari ã§ã¯ã“ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¯è¡¨ç¤ºã•ã‚Œãªã„ãŒã€Chromeãƒ»Edgeãƒ»Firefoxãƒ»Android Chrome ã§ã¯å‹•ä½œã™ã‚‹  
- ã€Œå®Œäº†ã€ãƒœã‚¿ãƒ³ãªã©ã§å®‰å…¨ã«é€ä¿¡æ¸ˆã¿ã¨ãªã£ãŸã‚ã¨ã§ã€ã“ã®ç¢ºèªã‚’è§£é™¤ã—ãŸã„å ´åˆã¯ `removeEventListener` ã‚’æ˜ç¤ºçš„ã«å‘¼ã³å‡ºã›ã°ã‚ˆã„

---

### âœ… ä»»æ„ï¼šå®Œäº†æ¸ˆã¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯è­¦å‘Šã‚’è§£é™¤ã™ã‚‹å ´åˆ

// å®Œäº†å¾Œã«ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è§£é™¤ã™ã‚‹ä¾‹ï¼ˆãƒœã‚¿ãƒ³æ“ä½œå†…ï¼‰

const handleComplete = () => {
  window.removeEventListener("beforeunload", handleBeforeUnload);
  // æ¬¡ã®ãƒšãƒ¼ã‚¸ã¸é·ç§»ãªã©
};

handleBeforeUnload ã‚’ useCallback ã§å¤–ã«å‡ºã™ã“ã¨ã§å¤–éƒ¨ã‹ã‚‰è§£é™¤å¯èƒ½
